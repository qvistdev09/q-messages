{% macro card(card_object, spacing) -%}
  <div {% if spacing == 10 %}class="br-medium bs-card bc-light"{% endif %}>
    <div>
      <div class="flex-row align-center justify-between medium-padding border-bottom bc-shaded border-top">
        <div class="flex-row align-center gap-small">
          <div class="flex-row align-center justify-center bc-header small-padding br-medium">
            <i class="fs-small fa-solid fa-user fc-light"></i>
          </div>
          <p class="fw-bold fc-header">{{ card_object.nickname }}</p>
        </div>
        <div class="flex-row align-center gap-small">
          <i class="fa-regular fa-clock fc-header fs-small"></i>
          <p class="fw-light fs-small fc-header">{{ card_object.readable_date }}</p>
        </div>
      </div>
      <div class="large-padding">
        <p>{{ card_object.body }}</p>
        {% if session %}
          <div class="flex-row justify-end">
            <a class="flex-row align-center gap-small" href="messages/{{card_object.id}}/reply">
              <span class="hover-underline">reply</span>
              <i class="fa-solid fa-reply fs-small"></i>
            </a>
          </div>
        {% endif %}
      </div>
      {% if card_object.children %}
        <div class="flex-row align-stretch">
          <div class="flex border-right" style="max-width:{{ spacing }}px;"></div>
          <div class="small-padding flex-column flex">
            {% for child in card_object.children %}
              <div class="small-padding">
                {{ card(child, spacing + 10) }}
              </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}
    </div>
  </div>
{%- endmacro %}